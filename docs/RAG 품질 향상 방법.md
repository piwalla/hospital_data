1. 정밀한 검색 범위를 위한 '커스텀 메타데이터 (Custom Metadata)'
가장 높은 품질의 RAG를 구현하는 핵심은 검색 노이즈를 줄이는 것입니다. 안티그래비티가 문서의 맥락을 정확히 파악하여 필요한 문서군(群) 내에서만 검색하도록 하려면, 파일 업로드 시점에 메타데이터를 반드시 함께 제공해야 합니다.
• 제공해야 할 정보: 파일별 key:value 형태의 메타데이터 리스트.
    ◦ 예: {"key": "category", "string_value": "financial_report"}, {"key": "year", "numeric_value": 2024}
• 활용 효과: 쿼리 시점에 metadata_filter를 사용하여 "2024년 재무 보고서 중에서만 검색해"와 같은 정밀한 지시가 가능해집니다. 이는 관련 없는 문서가 검색되는 것을 원천 차단하여 환각(Hallucination)을 줄이고 정답률을 비약적으로 높입니다.
2. 문서 특성에 최적화된 '청킹 설정 (Chunking Configuration)'
기본(Default) 설정은 범용적이지만 최고 품질을 보장하지는 않습니다. 문서의 종류(기술 문서, 논문, 일반 텍스트 등)에 따라 안티그래비티에게 구체적인 청킹 전략을 전달해야 합니다.
• 제공해야 할 정보: chunking_config 객체 내의 max_tokens_per_chunk와 max_overlap_tokens 값.
• 전략적 설정 가이드:
    ◦ 세밀한 정보 검색(예: 규정, 매뉴얼): 청크 크기를 200~500 토큰으로 작게 설정하여 정확도를 높입니다.
    ◦ 전체적인 맥락 파악(예: 논문, 긴 보고서): 청크 크기를 600~1,024 토큰으로 설정하여 문맥이 끊기지 않게 합니다.
    ◦ 필수 설정: 문장이나 문단이 잘리는 것을 방지하기 위해 **오버랩(Overlap)**을 청크 크기의 10~20% 수준(예: 1,024 토큰 시 256 토큰 오버랩)으로 설정하도록 정보를 제공하세요.
3. 신뢰성 확보를 위한 '그라운딩 메타데이터 (Grounding Metadata)' 처리 로직
"바이브 코딩"의 핵심은 사용자가 결과물을 신뢰할 수 있게 만드는 것입니다. 모델이 생성한 답변이 실제 문서의 어디에서 왔는지 시각적으로 보여주는 기능이 필수적입니다.
• 제공해야 할 정보: API 응답 객체 내의 grounding_metadata (특히 grounding_chunks와 grounding_supports).
• 활용 방법: 안티그래비티가 이 데이터를 인식하여 답변 텍스트 옆에 **인라인 인용(Inline Citation)**을 자동으로 생성하도록 구현해야 합니다. 이는 사용자가 답변의 근거를 즉시 클릭하여 원본 문서의 해당 위치를 확인할 수 있게 하여 RAG 시스템의 신뢰도를 극대화합니다.
4. 복잡한 문서 구조 인식을 위한 '레이아웃 파서 (Layout Parser)' 연동 정보
PDF와 같이 레이아웃이 복잡한 문서(다단 편집, 표, 이미지 포함)를 다룰 경우, 단순 텍스트 추출은 품질을 떨어뜨립니다. 엔터프라이즈급 품질을 위해서는 레이아웃 파싱 옵션을 활성화해야 합니다.
• 제공해야 할 정보: Document AI Layout Parser 활성화 여부 또는 layout_parser 설정.
• 활용 효과: 표(Table)나 다단(Multi-column) 구조를 정확히 인식하여, "표의 3번째 행 2번째 열 값은?"과 같은 질문에도 정확히 답변할 수 있는 고품질 데이터베이스를 구축할 수 있습니다. 참고: 이 기능은 Vertex AI RAG Engine 레벨에서 더 강력하게 지원됩니다.
5. 추론 능력 강화를 위한 'Gemini 3 모델' 선택 및 사고(Thinking) 설정
최상의 답변 품질을 위해서는 검색된 정보를 바탕으로 추론하는 모델의 능력이 중요합니다.
• 제공해야 할 정보: 모델명(gemini-3-pro-preview 등) 및 thinking_level 파라미터.
• 활용 전략: 복잡한 질문에 대해 안티그래비티가 thinking_level="high"로 설정된 Gemini 3 모델을 호출하도록 하면, 모델이 검색된 정보들 사이의 관계를 깊이 있게 추론하여 단순 요약을 넘어선 통찰력 있는 답변을 제공합니다.
요약: 안티그래비티에게 제공해야 할 핵심 데이터 구조 예시
가장 품질 높은 RAG 구현을 위해 안티그래비티 시스템에 다음과 같은 설정값을 입력값으로 제공하는 것을 권장합니다.
{
  "store_config": {
    "display_name": "Project_Finance_2024",
    "chunking_strategy": {
      "max_tokens": 1024,        // 문맥 유지를 위한 충분한 크기 [8]
      "overlap_tokens": 256      // 정보 단절 방지 [8]
    }
  },
  "file_metadata": [
    {"key": "department", "value": "finance"},
    {"key": "doc_type", "value": "audit_report"},
    {"key": "year", "value": 2024} // 정밀 검색 필터링용 [1]
  ],
  "model_config": {
    "model_name": "gemini-3-pro-preview", // 고성능 추론 모델 [22]
    "thinking_level": "high",             // 심층 추론 활성화 [20]
    "use_grounding": true                 // 답변의 근거(Citation) 포함 필수 [23]
  }
}
이 정보들을 안티그래비티가 인식하게 한다면, 단순 검색을 넘어 문맥을 이해하고, 근거를 제시하며, 복잡한 추론까지 가능한 최상위 품질의 RAG 시스템을 구축할 수 있습니다.