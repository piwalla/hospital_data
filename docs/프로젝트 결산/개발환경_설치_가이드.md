# ⚙️ 환경 설정 및 설치 가이드 (Setup Guide)

이 문서는 프로젝트 개발 환경을 처음부터 설정하는 방법을 안내합니다. 컴퓨터를 포맷했거나 새로운 개발자가 합류했을 때 이 가이드를 따라하세요.

## 1. 필수 프로그램 설치 (Prerequisites)

먼저 다음 프로그램들이 컴퓨터에 설치되어 있어야 합니다.

1.  **Node.js** (버전 18.17.0 이상)
    - 다운로드: [https://nodejs.org](https://nodejs.org) (LTS 버전 권장)
    - 확인 방법: 터미널(CMD)에 `node -v` 입력

2.  **Git**
    - 다운로드: [https://git-scm.com](https://git-scm.com)
    - 확인 방법: 터미널에 `git --version` 입력

3.  **코드 에디터**
    - **VS Code**: [https://code.visualstudio.com](https://code.visualstudio.com)
    - 또는 **Cursor** (AI 코딩 에디터): [https://cursor.sh](https://cursor.sh) (추천 👍)

---

## 2. 프로젝트 코드 가져오기

터미널을 열고 다음 명령어를 입력하여 코드를 다운로드합니다.

```bash
# 원하는 폴더로 이동
cd Desktop

# 프로젝트 클론 (URL은 본인 저장소 주소로 변경하세요)
git clone https://github.com/your-username/hospital_data.git

# 폴더로 이동
cd hospital_data

# 패키지 설치
npm install
```

---

## 3. 환경 변수 설정 (.env) - **가장 중요!** ⭐️

이 프로젝트는 외부 서비스(Clerk, Supabase, Google AI 등)를 많이 사용하므로 **API 키 설정**이 필수적입니다.
루트 폴더의 `.env.example` 파일을 복사하여 `.env` 파일을 만들고, 아래 값들을 채워넣어야 합니다.

```bash
cp .env.example .env
```

### 📝 `.env` 파일 필수 항목

**1. Clerk (로그인 및 인증)**

- 관리자 대시보드: [https://dashboard.clerk.com](https://dashboard.clerk.com)
- `API Keys` 메뉴에서 확인 가능

```env
NEXT_PUBLIC_CLERK_PUBLISHABLE_KEY=pk_test_... (공개 키)
CLERK_SECRET_KEY=sk_test_... (비밀 키 - 절대 공유 금지!)
NEXT_PUBLIC_CLERK_SIGN_IN_URL=/sign-in
NEXT_PUBLIC_CLERK_SIGN_IN_FALLBACK_REDIRECT_URL=/
NEXT_PUBLIC_CLERK_SIGN_UP_FALLBACK_REDIRECT_URL=/
```

**2. Supabase (데이터베이스)**

- 관리자 대시보드: [https://supabase.com/dashboard](https://supabase.com/dashboard)
- `Settings` -> `API` 메뉴에서 확인 가능

```env
NEXT_PUBLIC_SUPABASE_URL=https://...supabase.co
NEXT_PUBLIC_SUPABASE_ANON_KEY=eyJ... (anon public 키)
SUPABASE_SERVICE_ROLE_KEY=eyJ... (service_role secret 키 - 절대 공유 금지!)
NEXT_PUBLIC_STORAGE_BUCKET=uploads
```

**3. Google AI (챗봇)**

- 관리자 페이지: [https://aistudio.google.com/app/apikey](https://aistudio.google.com/app/apikey)
- 새 API 키 생성 필요

```env
GOOGLE_GENERATIVE_AI_API_KEY=AIza...
```

**4. Naver Maps (지도)**

- 관리자 콘솔: [https://console.ncloud.com](https://console.ncloud.com)
- Application 등록 후 Client ID 확인

```env
NEXT_PUBLIC_NAVER_CLIENT_ID=...
NEXT_PUBLIC_NAVER_CLIENT_SECRET=...
```

---

## 4. 데이터베이스 준비

코드는 있는데 데이터가 없으면 앱이 작동하지 않습니다. Supabase에 접속하여 테이블을 만들어야 합니다 (이미 되어 있다면 패스).

1.  Supabase Dashboard 접속 -> `SQL Editor` 메뉴 클릭
2.  프로젝트의 `supabase/migrations/schema.sql` 파일 내용을 복사해서 붙여넣기
3.  `Run` 버튼 클릭하여 테이블 생성

---

## 5. 개발 서버 실행

모든 설정이 끝났습니다! 이제 서버를 켜봅니다.

```bash
npm run dev
```

브라우저 주소창에 `http://localhost:3000`을 입력하고 접속해보세요.
화면이 잘 나온다면 성공입니다! 🎉

---

## 🚨 자주 발생하는 오류 (Troubleshooting)

**Q. `npm install` 중에 에러가 나요.**
A. Node.js 버전이 너무 낮을 수 있습니다. v18 이상인지 확인해주세요. 또는 기존 `node_modules` 폴더를 지우고 다시 시도해보세요.

**Q. 지도가 안 보여요.**
A. `.env` 파일에 `NEXT_PUBLIC_NAVER_CLIENT_ID`가 제대로 들어갔는지 확인하세요.

**Q. 로그인이 안 돼요.**
A. Clerk 대시보드에서 `localhost:3000` 도메인이 허용되어 있는지 확인해야 합니다.
