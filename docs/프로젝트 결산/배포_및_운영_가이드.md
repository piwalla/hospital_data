# 🚀 배포 및 운영 가이드 (Deployment & Operations)

이 문서는 웹사이트를 인터넷에 공개(배포)하고, 안정적으로 운영하는 방법을 설명합니다.

## 1. 배포 방식 (How it works)

우리는 **Vercel**이라는 서비스를 사용하여 웹사이트를 배포하고 있습니다.

- **자동 배포**: GitHub에 코드를 올리면(Push), Vercel이 이를 감지하여 자동으로 새 버전을 배포합니다.
- **소요 시간**: 보통 2~3분 정도 걸립니다.
- **사이트 주소**: `https://www.reworkcare.com` (예시)

### 수동으로 재배포하기

가끔 자동 배포가 실패하거나, 즉시 재배포가 필요할 때 사용합니다.

1.  [Vercel Dashboard](https://vercel.com/dashboard) 접속
2.  `hospital_data` 프로젝트 클릭
3.  **Deployments** 탭 이동
4.  가장 위의 배포 기록 오른쪽의 `...` 버튼 클릭 -> **Redeploy** 선택
5.  "Are you sure?" 팝업에서 **Redeploy** 클릭

---

## 2. 환경 변수 관리 (Environment Variables)

웹사이트가 작동하려면 비밀번호, API 키 같은 정보가 필요합니다. 이를 **환경 변수**라고 합니다.
로컬에서는 `.env` 파일에 저장했지만, 운영 사이트에서는 Vercel 대시보드에 저장해야 합니다.

### 환경 변수 수정 방법

1.  Vercel Dashboard -> 프로젝트 -> **Settings**
2.  왼쪽 메뉴에서 **Environment Variables** 클릭
3.  키(Key)와 값(Value)을 확인하고 수정하거나 추가합니다.

**⚠️ 주의사항**: 환경 변수를 수정하고 나면 반드시 **재배포(Redeploy)**를 해야 적용됩니다!

### 주요 환경 변수 목록

| 키 (Key)                            | 설명             | 어디서 찾나요?      |
| ----------------------------------- | ---------------- | ------------------- |
| `NEXT_PUBLIC_CLERK_PUBLISHABLE_KEY` | Clerk 공개 키    | Clerk 대시보드      |
| `CLERK_SECRET_KEY`                  | Clerk 비밀 키    | Clerk 대시보드      |
| `NEXT_PUBLIC_SUPABASE_URL`          | Supabase 주소    | Supabase 대시보드   |
| `NEXT_PUBLIC_SUPABASE_ANON_KEY`     | Supabase 공개 키 | Supabase 대시보드   |
| `SUPABASE_SERVICE_ROLE_KEY`         | Supabase 비밀 키 | Supabase 대시보드   |
| `GOOGLE_GENERATIVE_AI_API_KEY`      | AI 챗봇 API 키   | Google AI Studio    |
| `NEXT_PUBLIC_NAVER_CLIENT_ID`       | 네이버 지도 ID   | Naver Cloud Console |

---

## 3. 모니터링 (Monitoring)

서비스가 잘 돌아가는지 확인하는 방법입니다.

### A. 웹사이트 상태

매일 한 번씩 직접 접속해서 다음 기능들을 눌러보세요.

1.  로그인이 잘 되는지
2.  챗봇이 답변을 잘 하는지
3.  지도에 병원이 잘 뜨는지

### B. Vercel 로그 (개발자용)

에러가 발생했다면 Vercel에서 로그를 볼 수 있습니다.

1.  Vercel Dashboard -> Deployments
2.  현재 `Active` 상태인 배포 클릭
3.  **Logs** 탭 클릭
4.  빨간색으로 표시된 에러 메시지가 있는지 확인

### C. 사용량 확인

무료 플랜을 쓰고 있다면 사용량을 초과하지 않도록 주의해야 합니다.

- **Vercel**: Bandwidth, Function Execution 시간
- **Supabase**: Database 크기, Storage 용량
- **Clerk**: 월간 활성 사용자(MAU) 수
- **Google AI**: 분당 요청 횟수 (RPM)

---

## 4. 도메인 연결 (Domain)

`reworkcare.com` 같은 나만의 도메인을 연결하고 싶다면:

1.  Vercel 프로젝트 -> Settings -> **Domains**
2.  구매한 도메인 입력 후 Add
3.  도메인 구입처(가비아, GoDaddy 등)에서 DNS 설정 (Vercel이 알려주는 값 입력)
