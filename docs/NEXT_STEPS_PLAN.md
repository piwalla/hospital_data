# 다음 단계 실행 계획

**작성일**: 2025-01-14  
**현재 상태**: 서류 AI 요약 가이드 기능 구현 완료 (Phase 1-4)  
**목표**: 기능 검증 및 다음 우선순위 작업 진행

---

## 🎯 즉시 실행 필요 (Priority 1) 🔴

### Step 1: 서류 AI 요약 가이드 기능 검증 및 마이그레이션 (30분-1시간)

**왜 필요한가?**
- 서류 AI 요약 가이드 기능이 완료되었지만, 실제로 동작하려면 Supabase 테이블이 필요합니다.
- 마이그레이션을 실행하지 않으면 캐싱이 작동하지 않습니다.

**작업 내용:**
1. **Supabase 마이그레이션 실행** (10분)
   - `supabase/migrations/20250114180000_create_document_summaries_table.sql` 실행
   - Supabase Dashboard에서 직접 실행하거나 Supabase CLI 사용
   - 테이블 생성 확인

2. **기본 기능 테스트** (20-30분)
   - 개발 서버 실행 (`pnpm dev`)
   - `/documents` 페이지 접속
   - 각 서류 클릭하여 AI 요약 생성 확인
   - 로딩 상태 확인
   - 에러 처리 확인
   - 캐싱 동작 확인 (같은 서류 재클릭 시 빠른 로딩)

3. **문제 해결** (필요 시)
   - API 에러 발생 시 로그 확인
   - Gemini API 키 확인
   - Supabase 연결 확인

**예상 소요 시간**: 30분-1시간

**참고 파일:**
- `supabase/migrations/20250114180000_create_document_summaries_table.sql`
- `app/api/documents/[id]/summary/route.ts`
- `components/documents/DocumentSummary.tsx`

---

## 📋 우선순위별 작업 계획

### 🔴 Priority 1: 핵심 기능 완성 및 검증

#### 1. 서류 AI 요약 가이드 기능 검증 (즉시)
- [x] 기능 구현 완료
- [ ] Supabase 마이그레이션 실행
- [ ] 각 서류별 AI 요약 생성 테스트
- [ ] 캐싱 동작 확인
- [ ] 에러 처리 확인
- [ ] UI 반응형 테스트
- [ ] 로딩 시간 측정 (목표: 3초 이내)

**예상 소요 시간**: 1-2시간

---

### 🟡 Priority 2: 사용자 경험 개선

#### 2. 서류 가이드 기능 개선 (선택사항)
- [ ] 서류 검색 기능 추가
- [ ] 서류 카테고리별 필터링
- [ ] 인기 서류 표시
- [ ] 서류 작성 체크리스트 기능

**예상 소요 시간**: 2-3시간

---

### 🟢 Priority 3: 디자인 시스템 정리

#### 3. 색상 팔레트 일관성 검증 (1시간)
- [ ] 하드코딩된 색상 검색
  - `#2E7D32` (Primary 색상)
  - `#34C759` (Success/약국 색상)
  - `#9333EA` (재활기관 색상)
  - 기타 하드코딩된 색상
- [ ] CSS 변수로 통일
  - `app/globals.css`에 색상 변수 정의
  - 컴포넌트에서 하드코딩된 색상을 CSS 변수로 교체

**예상 소요 시간**: 1시간

#### 4. 타이포그래피 시스템 검증 (1-2시간)
- [ ] 컴포넌트별 타이포그래피 사용 현황 확인
- [ ] PRD 규격과 다른 부분 수정
  - h1: 28px ✅
  - h2: 22px ✅
  - body: 17px (검증 필요)
  - caption: 14px (검증 필요)
- [ ] Tailwind CSS 유틸리티 클래스로 표준화

**예상 소요 시간**: 1-2시간

---

### 🔵 Priority 4: 분석 기반 마련

#### 5. 사용자 활동 로깅 (2-3시간)
- [ ] 로깅 함수 생성 (`lib/utils/logging.ts`)
- [ ] 주요 이벤트에 로깅 추가
  - 병원 검색 로그
  - 병원 클릭 로그
  - 필터 변경 로그
  - 지도 이동 로그
  - 서류 조회 로그
  - 지역 선택 로그
- [ ] `user_activity_logs` 테이블에 저장

**예상 소요 시간**: 2-3시간

---

## 🚀 추천 실행 순서

### 즉시 실행 (오늘)
1. ✅ **Step 1: 서류 AI 요약 가이드 기능 검증** (30분-1시간)
   - Supabase 마이그레이션 실행
   - 기본 기능 테스트
   - 문제 해결

### 단기 (이번 주)
2. **Priority 3: 디자인 시스템 정리** (2-3시간)
   - 색상 팔레트 일관성 검증
   - 타이포그래피 시스템 검증

3. **Priority 4: 사용자 활동 로깅** (2-3시간)
   - 로깅 시스템 구축

### 중기 (다음 주)
4. **서류 가이드 기능 개선** (선택사항)
   - 검색 기능
   - 카테고리 필터링

---

## 📝 실행 체크리스트

### Step 1: 서류 AI 요약 가이드 기능 검증

#### 준비 단계
- [ ] Supabase 프로젝트 접속 가능 확인
- [ ] 환경변수 확인 (`GOOGLE_API_KEY`, `GEMINI_MODEL`)
- [ ] 개발 서버 실행 가능 확인

#### 마이그레이션 실행
- [ ] Supabase Dashboard 접속
- [ ] SQL Editor 열기
- [ ] `supabase/migrations/20250114180000_create_document_summaries_table.sql` 내용 복사
- [ ] SQL 실행
- [ ] 테이블 생성 확인 (`document_summaries` 테이블 확인)

#### 기능 테스트
- [ ] 개발 서버 실행 (`pnpm dev`)
- [ ] `/documents` 페이지 접속
- [ ] 서류 목록 표시 확인
- [ ] 첫 번째 서류 클릭 (Accordion 열기)
- [ ] 로딩 상태 확인 (스피너 표시)
- [ ] AI 요약 생성 확인 (3초 이내)
- [ ] 요약 내용 표시 확인
- [ ] 주의사항 표시 확인
- [ ] 다운로드 링크 버튼 확인
- [ ] 같은 서류 재클릭 시 캐싱 확인 (빠른 로딩)
- [ ] 다른 서류 클릭 시 새 요약 생성 확인
- [ ] 에러 처리 확인 (API 키 제거 시)

#### 반응형 테스트
- [ ] 모바일 화면 테스트 (320px)
- [ ] 태블릿 화면 테스트 (768px)
- [ ] 데스크톱 화면 테스트 (1024px+)

#### 접근성 테스트
- [ ] 키보드 네비게이션 (Tab, Enter)
- [ ] 스크린 리더 테스트 (선택사항)

---

## 🎯 성공 기준

### 서류 AI 요약 가이드 기능
- ✅ 모든 서류(8개)에서 AI 요약 생성 성공
- ✅ 캐싱 동작 확인 (재요청 시 빠른 응답)
- ✅ 로딩 시간 3초 이내
- ✅ 에러 발생 시 사용자 친화적 메시지 표시
- ✅ 반응형 디자인 정상 작동
- ✅ 접근성 기준 충족

---

## 💡 참고 사항

### Supabase 마이그레이션 실행 방법

**방법 1: Supabase Dashboard 사용 (권장)**
1. Supabase Dashboard 접속
2. SQL Editor 열기
3. 마이그레이션 파일 내용 복사하여 실행

**방법 2: Supabase CLI 사용**
```bash
supabase db push
```

### 테스트 시 주의사항
- Gemini API 호출 제한 확인 (무료 플랜: 분당 15회)
- 캐싱이 작동하는지 확인 (같은 서류 재요청 시)
- 에러 발생 시 브라우저 콘솔 및 서버 로그 확인

---

## 📞 문제 발생 시

### 일반적인 문제
1. **마이그레이션 실패**
   - Supabase 연결 확인
   - SQL 문법 확인
   - 테이블이 이미 존재하는지 확인

2. **AI 요약 생성 실패**
   - `GOOGLE_API_KEY` 확인
   - Gemini API 할당량 확인
   - 네트워크 연결 확인

3. **캐싱이 작동하지 않음**
   - `document_summaries` 테이블 생성 확인
   - Supabase 연결 확인
   - 로그 확인

---

## ✅ 다음 단계 결정

**Step 1 완료 후 선택:**
- **Option A**: 디자인 시스템 정리 (Priority 3)
- **Option B**: 사용자 활동 로깅 (Priority 4)
- **Option C**: 서류 가이드 기능 개선 (Priority 2)
- **Option D**: 다른 우선순위 작업

**추천**: Step 1 완료 후, Priority 3 (디자인 시스템 정리)를 진행하는 것을 권장합니다.





