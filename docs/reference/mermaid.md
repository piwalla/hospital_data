flowchart TD
    %% ì‚¬ìš©ì ì§„ì… ë° ì¸ì¦
    U["ğŸ§‘ ì‚¬ìš©ì<br>ì•±/ì›¹ ì§„ì…"] -->|1. ìœ„ì¹˜ ê¶Œí•œ ìš”ì²­ ë° í—ˆìš©| GP["ğŸ“ ìœ„ì¹˜ ê¸°ë°˜ ê¶Œí•œ<br>Location Permission"]

    GP -->|2. ìœ„ì¹˜ì •ë³´ ì „ë‹¬| F["Next.js í”„ë¡ íŠ¸ì—”ë“œ"]

    %% ì‚°ì¬ ì§€ì • ì˜ë£Œê¸°ê´€ íƒìƒ‰
    F -->|3. ë³‘ì›/ì•½êµ­ ì •ë³´ ìš”ì²­| DB["Supabase<br>hospitals_pharmacies"]
    F -.->|3-2. ìµœì´ˆ DB ë¯¸ì¡´ì¬ ì‹œ| ODP["ê³µê³µë°ì´í„°í¬í„¸ API<br>(data.go.kr)"]
    ODP -.->|3-3. ì‹ ê·œ ë°ì´í„° ìºì‹±| DB

    DB -->|4. ì§€ë„ì— ì£¼ë³€ ë³‘ì›/ì•½êµ­ í‘œì‹œ| F

    F -->|5. í•€/ë¦¬ìŠ¤íŠ¸ í´ë¦­| BS["ìƒì„¸ ì •ë³´(Bottom Sheet ë“±)"]

    BS -.->|5-1. 'ì „í™”' í´ë¦­| Phone["ì „í™” ì•± ì‹¤í–‰"]
    BS -.->|5-2. 'ê¸¸ì°¾ê¸°' í´ë¦­| MapApp["ì§€ë„ ì•± ì—°ë™"]

    BS -->|6. ì‚¬ìš©ì í™œë™ ë¡œê·¸ ê¸°ë¡| UA["Supabase<br>user_activity_logs"]

    %% ì„œë¥˜ AI ìš”ì•½ ê°€ì´ë“œ í”Œë¡œìš°
    F -->|7. ì‚°ì¬ ì„œë¥˜ ê°€ì´ë“œ íƒ­ ì´ë™| SG["ì„œë¥˜ ì•ˆë‚´ ë©”ë‰´"]
    SG -->|8. ì„œë¥˜ ëª©ë¡ í‘œì‹œ ë° ì„ íƒ| SL["ì„œë¥˜ ì„ íƒ"]
    SL -->|9. AI ìš”ì•½ ê°€ì´ë“œ ìš”ì²­| OAI["OpenAI API<br>gpt-4-turbo"]
    OAI -->|10. ìš”ì•½ ê²°ê³¼ ë°˜í™˜| F
    F -->|11. ìš”ì•½/ê°€ì´ë“œ í‘œì‹œ<br>ë° ë©´ì±… ê³ ì§€| UserView["ì‚¬ìš©ìì—ê²Œ ê²°ê³¼ í‘œì‹œ"]

    UserView -->|12. PDF ë‹¤ìš´ë¡œë“œ/ì„œë¥˜ ì°¸ê³ | UA

    %% ì¸ì¦ ë° ì—°ë™
    U -.->|í•„ìš”ì‹œ ë¡œê·¸ì¸(Clerk)| Auth["Clerk ì¸ì¦"]
    Auth -->|ìœ ì € ì •ë³´ ì €ì¥| DBU["Supabase<br>users"]

    %% subgraph: Frontend/Backend, ë°ì´í„°/ì¸ì¦
    subgraph "ğŸ“² ì‚¬ìš©ì ë””ë°”ì´ìŠ¤"
      U
      GP
      Phone
      MapApp
    end
    subgraph "ğŸ’» í”„ë¡ íŠ¸ì—”ë“œ(App, Next.js)"
      F
      BS
      SG
      SL
      UserView
    end
    subgraph "ğŸ—„ï¸ ë°±ì—”ë“œ/DB ë° ì™¸ë¶€ API"
      DB
      DBU
      UA
      ODP
      OAI
      Auth
    end