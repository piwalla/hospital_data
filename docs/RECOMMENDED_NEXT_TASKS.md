# 다음 작업 추천 (2025-11-13 기준)

## 📊 현재 진행 상황

### ✅ 완료된 Phase
- **Phase 1.1**: 프로젝트 초기 설정 및 인프라 구축 (100% 완료)
- **Phase 1.2**: 병원 찾기 기능 구현 (약 80% 완료)
  - ✅ API 연동 완료
  - ✅ 지도 컴포넌트 구현 완료
  - ✅ Bottom Sheet 구현 완료
  - ⏳ 필터링 및 검색 로직 (진행 중)

---

## 🎯 추천 작업 순서

### 1️⃣ **반경 5km 내 검색 로직** ⭐ 최우선 추천

**왜 먼저 진행해야 하나요?**
- ✅ **핵심 기능**: 사용자가 가장 필요로 하는 기능
- ✅ **기반 준비됨**: `getHospitalsNearby()` 함수가 이미 구현되어 있음
- ✅ **사용자 경험**: 위치 기반 검색은 MVP의 핵심 기능
- ✅ **구현 난이도**: 중간 (1-2시간 예상)
- ✅ **즉시 체감**: 사용자가 바로 느낄 수 있는 기능

**구현 항목**:
1. 거리 계산 함수 (Haversine 공식)
   - `lib/utils/distance.ts` 생성
   - 두 좌표 간 거리 계산 (km 단위)
2. 사용자 위치 기반 필터링
   - `HospitalMap`에서 사용자 위치 가져오기
   - 반경 5km 내 병원만 필터링
3. UI 업데이트
   - 거리 표시 (예: "1.2km")
   - 가까운 순으로 정렬
   - 필터링된 병원 수 표시

**예상 소요 시간**: 1-2시간

---

### 2️⃣ **진료과목별 필터링** ⭐ 높은 우선순위

**왜 다음에 진행해야 하나요?**
- ✅ **사용성 향상**: 사용자가 원하는 진료과목만 볼 수 있음
- ✅ **기능 보완**: 반경 검색과 함께 사용하면 더욱 유용
- ✅ **구현 준비됨**: `getHospitalsByDepartment()` 함수가 이미 구현되어 있음
- ✅ **디자인 준비됨**: design.md에 Filter Pills 디자인이 정의되어 있음

**구현 항목**:
1. 필터 UI 컴포넌트
   - `components/HospitalFilter.tsx` 생성
   - 주요 진료과: 정형외과, 신경외과, 재활의학과 등
   - Filter Pills 형태
2. 필터링 로직
   - 다중 선택 지원
   - 필터 적용 시 지도 마커 업데이트
   - 목록 자동 갱신

**예상 소요 시간**: 1-2시간

---

### 3️⃣ **사용자 활동 로깅** ⭐ 중간 우선순위

**왜 나중에 진행해도 되나요?**
- ⚠️ **분석 기능**: 핵심 기능은 아니지만 중요함
- ⚠️ **데이터 수집**: 향후 개선을 위한 데이터 필요
- ✅ **구현 난이도**: 낮음 (1시간 예상)
- ✅ **기반 준비됨**: `user_activity_logs` 테이블이 이미 생성되어 있음

**구현 항목**:
1. 로깅 함수 생성
   - `lib/api/activity-logs.ts` 생성
   - `logUserActivity()` 함수 구현
2. 이벤트 추적
   - 병원 검색, 조회, 필터 사용
   - 위치 정보 기록

**예상 소요 시간**: 1시간

---

### 4️⃣ **Phase 1.3: 서류 AI 요약 가이드** (Phase 1.2 완료 후)

**왜 나중에 진행하나요?**
- 📋 **다른 기능**: 병원 찾기와는 별개의 기능
- 📋 **Phase 1.2 완료 후**: 병원 찾기 기능을 완성한 후 진행하는 것이 좋음
- 📋 **OpenAI 연동**: 추가 설정이 필요함

---

## 💡 추천 진행 시나리오

### 시나리오 A: 빠른 MVP 완성 (추천)
```
1. 반경 5km 내 검색 로직 (1-2시간)
   ↓
2. 진료과목별 필터링 (1-2시간)
   ↓
3. 사용자 활동 로깅 (1시간)
   ↓
4. Phase 1.2 완료! → Phase 1.3 시작
```

**총 예상 시간**: 3-5시간

### 시나리오 B: 핵심 기능 우선
```
1. 반경 5km 내 검색 로직 (1-2시간)
   ↓
2. Phase 1.3 시작 (서류 AI 요약 가이드)
   ↓
3. 나중에 필터링 및 로깅 추가
```

**총 예상 시간**: 1-2시간 (Phase 1.2 핵심만)

---

## 🎯 최종 추천

### **"반경 5km 내 검색 로직"부터 시작하세요!**

**이유**:
1. ✅ 사용자가 가장 필요로 하는 핵심 기능
2. ✅ 이미 구현된 함수를 활용할 수 있어 빠르게 완성 가능
3. ✅ 사용자 경험에 즉시 영향을 미침
4. ✅ 다음 기능(필터링)의 기반이 됨

**다음 단계**:
1. `lib/utils/distance.ts` 생성 (거리 계산 함수)
2. `HospitalMap` 컴포넌트에 필터링 로직 추가
3. 목록에 거리 정보 표시
4. 가까운 순으로 정렬

---

## 📝 참고 자료

- **구현 가이드**: `docs/NEXT_STEPS.md`
- **디자인 가이드**: `docs/design.md`
- **API 문서**: `lib/api/hospitals.ts` (getHospitalsNearby 함수 참고)


