# 개인화된 재활 여정 대시보드 (My Rehabilitation Journey) 제안서

사용자가 로그인 후 자신의 현재 상태(단계)를 확인하고, 그에 맞는 맞춤형 정보(영상, 문서, 팁)를 제공받을 수 있는 **"나의 산재 여정 (My Journey)" 대시보드** 구축을 제안합니다.

## 1. 개요 및 컨셉

**"복잡한 산재 절차, 비서처럼 챙겨주는 나만의 공간"**

- **목표**: 단순 정보 나열이 아닌, **"지금 당장 무엇을 해야 하는지"**를 알려주어 사용자의 불안감을 해소합니다.
- **접근 방식**: 기존 타임라인 데이터를 활용하되, 사용자의 `현재 단계`를 기준으로 큐레이션된 뷰를 제공합니다.

## 2. 화면 구성 및 UX 아이디어

### A. 진입점 (Navigation)

- 로그인 후 상단 GNB(Global Navigation Bar)에 **`나의 여정`** 또는 **`마이페이지`** 버튼 생성
- 버튼에 배지(Badge)를 달아 "확인할 알림/할 일" 개수 표시 (예: 🔴 2)

### B. 대시보드 메인 화면 (UI 구성)

대시보드는 크게 3가지 섹션으로 구성합니다.

#### 1. 👋 상단: 현재 상태 및 진행률 (Current Status Hero)

- **메시지**: "안녕하세요 **홍길동**님, 현재 **[Step 2: 요양/치료]** 단계를 진행 중이시네요."

- **시각적 진행 바**: 전체 4단계 중 현재 위치를 시각적으로 보여줍니다. (예: 2/4 단계 도달)
- **빠른 액션 버튼**:
  - "다음 단계로 넘어가기" (사용자가 직접 단계 완료 처리)
  - "내 담당자에게 문의하기" (관리자 채팅 연결)

#### 2. ✅ 중단: 오늘의 할 일 (Action Items)

- 현재 단계(`step_number`)에 해당하는 `TimelineAction` 데이터를 불러와 **체크리스트** 형태로 보여줍니다.
- **예시 (Step 2 인 경우)**:
  - [ ] 치료비 지급 신청서 제출하기
  - [ ] 휴업급여 청구하기
  - [ ] 전원 요양 신청하기 (필요 시)
- 각 항목 클릭 시 상세 가이드 모달 또는 페이지로 이동합니다.

#### 3. 📚 하단: 맞춤형 가이드 (Curated Content Feed)

현재 단계에 꼭 필요한 콘텐츠를 카동으로 추천합니다.

- **📄 필수 서류**: 현재 단계의 `TimelineDocument` 중 `is_required: true`인 항목을 "다운로드" 버튼과 함께 노출.
- **📺 추천 영상**: (관리자 페이지에서 단계별 매핑된) 재활 운동법, 산재 보상 설명 영상 등을 카드 형태로 슬라이드.
- **💡 꿀팁/주의사항**: 현재 단계의 `TimelineWarning` 데이터를 "잠깐! 놓치지 마세요" 코너로 구성.

#### 4. 📅 별도 섹션: 산재 간편 캘린더 (My Easy Calendar)

**"나도 모르게 잊어버리는 서류 제출일과 병원 일정, 클릭 한 번으로 기록하세요."**

- **필요성**: 장기간 이어지는 산재 과정에서 휴업급여 신청일, 병원 방문일 등을 잊어버리기 쉽다는 생생한 사용자 경험 반영.
- **주요 기능**:
  - **원클릭 기록 (One-Click Logging)**: "오늘 휴업급여 신청함", "오늘 입원함" 등의 프리셋 버튼을 눌러 **오늘 날짜**에 즉시 기록.
  - **주요 일정 시각화**: 달력 위젯에 입원, 수술, 통원, 재활, 심리상담 등 일정을 다른 색상 점(Dot)으로 표시.
  - **리마인더**: 다음 휴업급여 신청 예정일(보통 1개월 후) 등을 자동 계산하여 표시해 줌.
- **기록 카테고리**:
  - 🏥 **진료/치료**: 입원, 수술, 외래진료, 병행진료
  - 💪 **재활/상담**: 재활치료, 심리상담, 직업훈련
  - 📄 **행정/급여**: 휴업급여 신청, 요양비 청구, 전원 신청, 장해 평가

---

## 3. 기술적 구현 방안 (Technical Implementation)

기존 리소스를 최대한 활용하여 효율적으로 개발합니다.

### A. 데이터 모델링 (DB Schema Update)

`User` 테이블(또는 목업 데이터)에 다음 필드를 활용합니다.

1.  **`current_step` (Integer)**: 사용자의 현재 진행 단계 (0: 가입직후, 1~4: 각 단계, 5: 완료)
2.  **`completed_actions` (Array/JSON)**: 현재 단계에서 완료한 세부 액션 ID 목록 (체크리스트 상태 저장용)
3.  **`calendar_events` (Array/JSON)** [NEW]: 개인 일정 데이터
    ```typescript
    interface CalendarEvent {
      id: string;
      date: string; // "2025-06-30"
      type: "hospital" | "rehab" | "admin" | "counseling";
      title: string; // "휴업급여 신청", "정형외과 외래"
      memo?: string;
    }
    ```

### B. 로직 흐름 (Logic Flow)

1.  **사용자 로그인 시**: DB에서 `current_step`을 조회합니다.
2.  **대시보드 페이지 로드**:
    - `getAllStagesWithDetails()`를 호출하여 전체 타임라인 데이터를 가져옵니다.
    - `stages.find(s => s.step_number === user.currentStep)` 로직으로 **현재 단계 데이터**만 필터링합니다.
    - 필터링된 데이터의 `actions`, `documents`, `warnings`를 각각 UI 섹션에 바인딩합니다.
3.  **단계 변경**:
    - 사용자가 "이 단계 완료하기" 버튼 클릭 시 -> `current_step`을 +1 업데이트하고 대시보드를 리프레시합니다.

### C. 컴포넌트 재사용 전략

- **`TimelineStepCard`**: 기존 타임라인 카드 컴포넌트를 조금 변형하여 대시보드 상단 "현재 상태" 카드에 재사용 가능합니다.
- **`RequestedDocumentsList`**: 기존 서류 목록 컴포넌트를 활용하여 "필수 서류" 섹션을 구성합니다.

---

## 4. 제안하는 다음 단계 (Next Steps)

1.  **`app/dashboard/page.tsx` 생성**: 기본적인 레이아웃(헤더 + 3단 구성)을 잡습니다.
2.  **Mock 데이터 연동**: `mock-admin-data.ts`의 `getUser()`를 활용해 로그인된 사용자(예: 'user-1')의 정보를 불러와 화면에 뿌려봅니다.
3.  **위젯 구현**: "오늘의 할 일" 체크리스트 위젯부터 구현하여 사용자가 체크박스를 누르면 상태가 변하는 인터랙션을 추가합니다.
