<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>네이버 Dynamic Map 테스트</title>
    <script type="text/javascript" src="https://openapi.map.naver.com/openapi/v3/maps.js?ncpClientId=892s22du59"></script>
    <style>
        #map {
            width: 100%;
            height: 400px;
            border: 1px solid #ddd;
            margin: 20px 0;
        }
        body {
            font-family: Arial, sans-serif;
            padding: 20px;
        }
        .status {
            padding: 10px;
            background: #f0f0f0;
            border-radius: 5px;
            margin-bottom: 10px;
        }
    </style>
</head>
<body>
    <h1>네이버 Dynamic Map 테스트</h1>

    <div class="status" id="status">
        지도 로딩 중...
    </div>

    <div id="map"></div>

    <div>
        <h3>테스트 결과:</h3>
        <ul>
            <li>SDK 로드 상태: <span id="sdk-status">확인 중...</span></li>
            <li>지도 생성 상태: <span id="map-status">대기 중...</span></li>
            <li>마커 추가 상태: <span id="marker-status">대기 중...</span></li>
        </ul>
    </div>

    <script>
        // SDK 로드 상태 확인
        document.getElementById('sdk-status').textContent = '로드됨 ✅';

        try {
            // 서울시청 좌표 (테스트용)
            const seoulCityHall = new naver.maps.LatLng(37.5666, 126.9784);

            // 지도 생성
            const map = new naver.maps.Map('map', {
                center: seoulCityHall,
                zoom: 10,
                mapTypeControl: true
            });

            document.getElementById('map-status').textContent = '성공 ✅';

            // 테스트 마커 추가 (서울시청)
            const marker = new naver.maps.Marker({
                position: seoulCityHall,
                map: map,
                title: '서울특별시청'
            });

            document.getElementById('marker-status').textContent = '성공 ✅';

            // 정보창 추가
            const infoWindow = new naver.maps.InfoWindow({
                content: '<div style="padding:10px;">서울특별시청<br>산재 환자 지원 플랫폼 테스트</div>'
            });

            // 마커 클릭 이벤트
            naver.maps.Event.addListener(marker, 'click', function() {
                if (infoWindow.getMap()) {
                    infoWindow.close();
                } else {
                    infoWindow.open(map, marker);
                }
            });

            document.getElementById('status').innerHTML = '<strong>지도 로드 성공! ✅</strong><br>서울시청에 마커가 표시됩니다. 마커를 클릭해보세요.';

        } catch (error) {
            document.getElementById('status').innerHTML = '<strong>지도 로드 실패 ❌</strong><br>오류: ' + error.message;
            document.getElementById('map-status').textContent = '실패 ❌: ' + error.message;
            document.getElementById('marker-status').textContent = '실패 ❌';
        }
    </script>
</body>
</html>
